# Trainer benchmark configuration
# Performance targets for FAISS index training

benchmarks:
  faiss_training:
    name: "FAISS Index Training Benchmark"
    target_metrics:
      build_time_seconds: 60.0
      memory_usage_mb: 1024.0
      index_size_mb: 500.0

  faiss_query:
    name: "FAISS Query Performance Benchmark"
    target_metrics:
      query_p99_ms: 10.0  # 99th percentile query latency must be â‰¤ 10ms
      query_p95_ms: 8.0
      query_p50_ms: 5.0
      recall_at_10: 0.95
      throughput_qps: 1000

    test_data:
      n_vectors: 1000000
      n_queries: 10000
      vector_dimension: 768

    index_types:
      - type: "HNSW"
        parameters:
          m: 32
          ef_construction: 200
          ef_search: 64

      - type: "OPQ+HNSW"
        parameters:
          m_pq: 32
          n_subquantizers: 64
          m_hnsw: 16
          ef_construction: 200

  alert_dataset:
    name: "Alert Dataset Processing Benchmark"
    target_metrics:
      load_time_seconds: 30.0
      preprocessing_time_seconds: 60.0
      embedding_time_seconds: 120.0

    dataset_config:
      max_alerts: 100000
      batch_size: 1000
      embedding_model: "all-MiniLM-L6-v2"

# Test execution settings
execution:
  timeout_seconds: 600
  n_runs: 3
  warmup_runs: 1
  output_format: "json"
  failure_threshold: 0.1  # Allow up to 10% of runs to fail
