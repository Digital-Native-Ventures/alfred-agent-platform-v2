FROM supabase/storage-api:latest

USER root

# Use apk for Alpine Linux
RUN apk add --no-cache postgresql-client

# Copy the entrypoint script
COPY entrypoint.sh /app/entrypoint.sh
RUN chmod +x /app/entrypoint.sh

# Switch back to node user
USER node

# Set the entrypoint to our script
ENTRYPOINT ["/app/entrypoint.sh"]
